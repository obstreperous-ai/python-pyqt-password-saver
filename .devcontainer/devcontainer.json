{
  "name": "Python PyQt Password Saver",
  "image": "mcr.microsoft.com/devcontainers/python:3.12",
  
  // Features to add to the dev container
  "features": {
    "ghcr.io/devcontainers/features/git:1": {},
    "ghcr.io/devcontainers/features/github-cli:1": {}
  },

  // Configure tool-specific properties
  "customizations": {
    "vscode": {
      // Set *default* container specific settings.json values on container create
      "settings": {
        "python.defaultInterpreterPath": "/usr/local/bin/python",
        "python.analysis.typeCheckingMode": "basic",
        "python.analysis.autoImportCompletions": true,
        "editor.formatOnSave": true,
        "editor.codeActionsOnSave": {
          "source.organizeImports": "explicit"
        },
        "files.exclude": {
          "**/__pycache__": true,
          "**/*.pyc": true,
          ".password_saver": true
        },
        "[python]": {
          "editor.defaultFormatter": "ms-python.black-formatter",
          "editor.tabSize": 4,
          "editor.insertSpaces": true
        }
      },
      
      // Add the IDs of extensions you want installed when the container is created
      "extensions": [
        "ms-python.python",
        "ms-python.vscode-pylance",
        "ms-python.black-formatter",
        "charliermarsh.ruff",
        "GitHub.copilot",
        "GitHub.copilot-chat",
        "seanwu.vscode-qt-for-python",
        "ms-python.debugpy"
      ]
    }
  },

  // Use 'forwardPorts' to make a list of ports inside the container available locally
  // PyQt6 applications typically don't need port forwarding unless running a web server
  "forwardPorts": [],

  // Use 'postCreateCommand' to run commands after the container is created
  "postCreateCommand": "pip install --upgrade pip && pip install -r requirements.txt && pip install black ruff mypy",

  // Comment out to connect as root instead. More info: https://aka.ms/vscode-remote/containers/non-root
  "remoteUser": "vscode",

  // Set environment variables for the container
  // Note: QT_QPA_PLATFORM=offscreen allows PyQt apps to run without display
  // For X11 forwarding, change to "xcb" or remove this setting
  "remoteEnv": {
    "DISPLAY": ":0",
    "QT_QPA_PLATFORM": "offscreen",
    "PYTHONUNBUFFERED": "1"
  },

  // Configure container for GUI applications (X11 forwarding for PyQt)
  "runArgs": [
    "--security-opt=seccomp=unconfined"
  ],

  // Lifecycle scripts
  "onCreateCommand": "echo 'Container created for Python PyQt Password Saver development'",
  "updateContentCommand": "pip install --upgrade pip",
  "postStartCommand": "git config --global --add safe.directory ${containerWorkspaceFolder}"
}
